# Phase 2: Frontend Shared Layout & Components

## Context Links
- Research: [researcher-01-frontend-chartjs.md](./research/researcher-01-frontend-chartjs.md)
- Existing: `/Users/cps/web-demo-ptdl/app/layout.tsx`
- Components config: `/Users/cps/web-demo-ptdl/components.json`

## Overview
**Priority**: P1 (Critical)
**Status**: Pending
**Effort**: 1h
**Description**: Install shadcn/ui components, create Vietnamese navbar with 3 navigation links, update root layout to support all pages.

## Key Insights
- shadcn/ui already initialized (components.json exists)
- Use Vietnamese text for UI (e.g., "Trang chủ", "Bảng điều khiển", "Dự đoán giá")
- Navbar must be client component for active link highlighting
- Keep layout minimal (no sidebar, just top navbar)

## Requirements

### Functional
- Install 6 shadcn/ui components: card, select, input, form, button, label
- Navbar with logo/title and 3 links: Home (/), Dashboard (/dashboard), Predict (/predict)
- Active link highlighting with underline or color change
- Responsive navbar (collapse to hamburger on mobile)
- Vietnamese UI text throughout

### Non-Functional
- Navbar renders without layout shift
- Components follow Tailwind CSS v4 + shadcn/ui conventions
- Typography: Inter font (Next.js default)
- Color scheme: Neutral tones with blue accent for links

## Architecture

### Component Structure
```
app/
├── layout.tsx           # Root layout (updated)
├── page.tsx             # Landing page (exists)
└── components/
    └── navbar.tsx       # Main navigation bar (new)

components/ui/           # shadcn/ui components (auto-generated)
├── card.tsx
├── select.tsx
├── input.tsx
├── form.tsx
├── button.tsx
└── label.tsx
```

### Navbar Design
- Fixed top position
- Height: 64px
- Container: max-width-7xl with horizontal padding
- Left: Project title/logo "Phân Tích Giá Căn Hộ TP.HCM"
- Right: 3 navigation links
- Active state: blue underline (2px border-b-2)
- Hover state: text-blue-600 transition

## Related Code Files

### Files to Create
- `/Users/cps/web-demo-ptdl/app/components/navbar.tsx` (~80 lines)

### Files to Modify
- `/Users/cps/web-demo-ptdl/app/layout.tsx` (add Navbar import)
- `/Users/cps/web-demo-ptdl/components/ui/card.tsx` (auto-generated by shadcn)
- `/Users/cps/web-demo-ptdl/components/ui/select.tsx` (auto-generated)
- `/Users/cps/web-demo-ptdl/components/ui/input.tsx` (auto-generated)
- `/Users/cps/web-demo-ptdl/components/ui/form.tsx` (auto-generated)
- `/Users/cps/web-demo-ptdl/components/ui/button.tsx` (auto-generated)
- `/Users/cps/web-demo-ptdl/components/ui/label.tsx` (auto-generated)

### Files to Delete
- None

## Implementation Steps

### 1. Install shadcn/ui components
```bash
cd /Users/cps/web-demo-ptdl
pnpm dlx shadcn@latest add card select input form button label
```

Expected output:
- Creates/updates components/ui/card.tsx
- Creates/updates components/ui/select.tsx
- Creates/updates components/ui/input.tsx
- Creates/updates components/ui/form.tsx
- Creates/updates components/ui/button.tsx
- Creates/updates components/ui/label.tsx
- Installs peer dependencies: react-hook-form, @hookform/resolvers, zod, @radix-ui/react-label, @radix-ui/react-select

### 2. Create navbar.tsx component

File: `/Users/cps/web-demo-ptdl/app/components/navbar.tsx`

Structure:
```typescript
"use client";

import Link from "next/link";
import { usePathname } from "next/navigation";
import { cn } from "@/lib/utils";

interface NavLink {
  href: string;
  label: string;
}

const navLinks: NavLink[] = [
  { href: "/", label: "Trang chủ" },
  { href: "/dashboard", label: "Bảng điều khiển" },
  { href: "/predict", label: "Dự đoán giá" },
];

export function Navbar() {
  const pathname = usePathname();

  return (
    <nav className="border-b bg-white">
      <div className="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div className="flex h-16 items-center justify-between">
          {/* Logo/Title */}
          <Link href="/" className="text-xl font-bold text-gray-900">
            Phân Tích Giá Căn Hộ TP.HCM
          </Link>

          {/* Navigation Links */}
          <div className="flex items-center space-x-8">
            {navLinks.map((link) => {
              const isActive = pathname === link.href;
              return (
                <Link
                  key={link.href}
                  href={link.href}
                  className={cn(
                    "border-b-2 pb-1 text-sm font-medium transition-colors hover:text-blue-600",
                    isActive
                      ? "border-blue-600 text-blue-600"
                      : "border-transparent text-gray-700"
                  )}
                >
                  {link.label}
                </Link>
              );
            })}
          </div>
        </div>
      </div>
    </nav>
  );
}
```

Key features:
- Client component with usePathname hook for active link detection
- cn() utility for conditional className joining
- Vietnamese labels
- Responsive with Tailwind breakpoints

### 3. Update root layout.tsx

File: `/Users/cps/web-demo-ptdl/app/layout.tsx`

Changes:
```typescript
import { Navbar } from "./components/navbar";

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="vi">
      <body className="antialiased">
        <Navbar />
        <main className="min-h-screen">{children}</main>
      </body>
    </html>
  );
}
```

Key changes:
- Import Navbar component
- Add lang="vi" for Vietnamese language
- Wrap children in <main> tag
- Navbar above main content

### 4. Verify component installation
```bash
# Check if components exist
ls -la /Users/cps/web-demo-ptdl/components/ui/
```

Expected files:
- card.tsx
- select.tsx
- input.tsx
- form.tsx
- button.tsx
- label.tsx

### 5. Test navbar rendering
```bash
cd /Users/cps/web-demo-ptdl
pnpm dev
```

Navigate to:
- http://localhost:3000/ (should show navbar + landing page)
- Check active link highlighting on each route
- Test hover states

### 6. Create placeholder pages for navigation

Create empty pages to prevent 404 errors:

File: `/Users/cps/web-demo-ptdl/app/dashboard/page.tsx`
```typescript
export default function DashboardPage() {
  return (
    <div className="container mx-auto py-8">
      <h1 className="text-3xl font-bold">Bảng điều khiển</h1>
      <p className="mt-4 text-gray-600">Dashboard content coming in Phase 4</p>
    </div>
  );
}
```

File: `/Users/cps/web-demo-ptdl/app/predict/page.tsx`
```typescript
export default function PredictPage() {
  return (
    <div className="container mx-auto py-8">
      <h1 className="text-3xl font-bold">Dự đoán giá căn hộ</h1>
      <p className="mt-4 text-gray-600">Prediction form coming in Phase 5</p>
    </div>
  );
}
```

## Todo List
- [ ] Install shadcn/ui components (card, select, input, form, button, label)
- [ ] Verify components/ui directory created
- [ ] Create app/components/navbar.tsx with Vietnamese text
- [ ] Update app/layout.tsx to import Navbar
- [ ] Add lang="vi" to <html> tag
- [ ] Create placeholder dashboard page
- [ ] Create placeholder predict page
- [ ] Test navbar rendering at localhost:3000
- [ ] Verify active link highlighting works
- [ ] Test responsive behavior (mobile viewport)
- [ ] Check no TypeScript compilation errors

## Success Criteria
- pnpm dev starts without errors
- Navbar renders on all pages
- Active link shows blue underline
- Hover effect works on navigation links
- Vietnamese text displays correctly
- No hydration errors in console
- TypeScript compiles without errors
- All 3 routes accessible (/, /dashboard, /predict)

## Risk Assessment
- **shadcn CLI version**: May install different component versions → Pin to latest stable
- **Client component errors**: usePathname requires "use client" directive
- **Tailwind v4 compatibility**: shadcn/ui may generate v3 syntax → Manual adjustment needed
- **Font loading**: Inter font may cause FOUT → Use font-display: swap

## Security Considerations
- No authentication needed (public demo)
- No user input in navbar (static links)
- XSS protection via Next.js automatic escaping

## Next Steps
- After completion, proceed to Phase 3 (Landing Page)
- Navbar will be reused across all 3 pages
- Test navigation flow before building page content
